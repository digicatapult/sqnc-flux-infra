# https://github.com/codecentric/helm-charts/blob/master/charts/keycloakx/values.yaml
nameOverride: "keycloak"
http:
  relativePath: /auth/
proxy:
  enabled: true
  mode: xforwarded
ingress:
  enabled: true
  servicePort: http
  annotations: {
    nginx.ingress.kubernetes.io/ssl-redirect: "false",
    nginx.ingress.kubernetes.io/proxy-buffer-size: 128k
  }
  rules:
    - host: "localhost"
      paths:
        - path: "/auth/"
          pathType: Prefix
extraEnv: |
  - name: KC_BOOTSTRAP_ADMIN_USERNAME
    value: admin
  - name: KC_BOOTSTRAP_ADMIN_PASSWORD
    value: admin
  - name: KC_HOSTNAME_ADMIN
    value: "http://localhost:3080/auth/"
  - name: KC_HOSTNAME
    value: "http://localhost:3080/auth/"
  - name: KC_HOSTNAME_DEBUG
    value: "true"
  - name: KC_HTTP_MANAGEMENT_SCHEME
    value: "http"
  - name: JAVA_OPTS_APPEND
    value: >-
      -Djgroups.dns.query={{ include "keycloak.fullname" . }}-headless
args:
  - "start-dev"
  - "--import-realm"
  - "--verbose"
extraVolumes: |
  - name: realm-volume
    configMap:
      name: keycloak-realms
      namespace: keycloak
extraVolumeMounts: |
  - mountPath: /opt/keycloak/data/import
    name: realm-volume
database:
  vendor: postgres
  hostname: cluster-rw.keycloak.svc.cluster.local
  port: 5432
  database: keycloak
  username: keycloak
  password: keycloak
logging:
  level: DEBUG
podAnnotations:
    instrumentation.opentelemetry.io/inject-java: "monitoring/java-instrumentation"
